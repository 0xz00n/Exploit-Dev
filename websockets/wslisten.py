import ssl
import json
import websocket

class subscriber:
    def listenForever(self):
        try:
            websocket.enableTrace(True)
            ws = websocket.WebSocket(sslopt={"cert_reqs": ssl.CERT_NONE})
            #ws.connect("ws://blah.com/websocket")
            ws.connect("wss://blah.com/websocket",
                    cookie = "stuff: cookiecontent")
            ws.send(json.dumps([json.dumps({'msg': 'CONNECT', 'version': '1.1,1.0', 'heart-beat': '10000,10000'})]))
            #ws.send("test message")
            while True:
                result = ws.recv()
                #result = json.loads(result)
                print("Received '%s'" % result)

            ws.close()
        except Exception as ex:
            print("exception: ", format(ex))


try:
    subscriber().listenForever()
except:
    print("Exception occured: ")
